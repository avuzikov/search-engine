# Authors

Alexander Uzikov (frontend on React, part of backend on Google Firebase)

Clock-me (machine learning, backend on Python)

# Implementation details

## Frontend, main structure

I build a SPA(single page application) with React. The public folder contains the only HTML file - index.html. This file contains `<div id="root"></div>`, which is a placeholder for the code generated by React.\
React is a library which allows to build a tree of "components" - building block of the page. The code related to components is stored in src subfolder. The main component - App - is rendered in index.js file. The App component is wrapped in Redux Provider(provides app-wide state) and in BrowserRouter(allows to build SPA using React Router v6).

### Redux and global state of the App

Redux is a library to manage app-wide state. The main concept of Redux is to have one central data store in the app. Components set subscriptions to the central store, which notifies them in case of updates and provides them slices of state. The state is not manipulated directly from the components. Instead, components dispatch actions - JavaScript objects with information related to the update. Actions are received be Reducers - pure functions defining how to change the state of the app with the information from actions.\
Another related library I use is the Redux Toolkit. This library allows to split the code of the store into several files, each related to one part of the global state. In my case, I have 3 logical pieces of the global state with related Reducers: authentication (described in store/auth.js), URLs for APIs(store/token.js), history of user requests(store/auth.js) and a file with a secret token which I do not publish on GitHub(store/token_secret.js). The file store/index.js combines slices into a global state.

### Authentication and authorization

The backend at Google Firebase is stateless. In order to login, a user needs an authentication token. The App checks if the user has a valid authentication token in the local storage and renders either the part of the website for not authenticated users or the main part. \
If the user is not authenticated, he has access only to login ("/login") and create account ("/new") pages. On both of them he can enter data, which will be submitted as POST requests to Google Firebase Authentication API. If authorization and authentication were successful, the user receives a valid token and stores it in the local storage. \

### The main structure of the website

The part of the website for authenticated users currently contains 3 pages (a search page, a history page, a change password page) and a logout button. A search page has a form for a quote. After submitting the quote, the form sends a request to the search engine, stores the result - description of the closest movie and the request - in Firebase Realtime Database and renders the movie information on the search page. A history page contains the history of user requests with the most recent one on top. The click on delete button erases the request from real-time database and the current state of the App. The change password page has a form to change password and Logout button deletes the authorization token from the local storage and changes the global state of React app.

### Firebase

Google Firebase is used for authentication and storing data related to users. The NoSQL storage configured in a way that each user has a unique id and records with his requests. Each record consists of request, time of request and the result of search(name of the movie, rating, quote, time of the quote, poster and a link to IMDb).
